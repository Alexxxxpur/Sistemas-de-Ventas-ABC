<!DOCTYPE html>
<html lang="en">

<head>
    {% load static %}
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}{% endblock %}</title>

    <!-- Google Font: Source Sans Pro -->
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="{% static 'adminlte/plugins/fontawesome-free/css/all.min.css' %}">
    <!-- Theme style -->
    <link rel="stylesheet" href="{% static 'adminlte/dist/css/adminlte.min.css' %}">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">

    <style>
        .loading {
            position: fixed;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 1);
            /* Fondo blanco con opacidad */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            top: 0;
            left: 0;
        }

        .bouncing-loader {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .bouncing-loader div {
            width: 15px;
            height: 15px;
            margin: 0 5px;
            background-color: #3909be;
            border-radius: 50%;
            animation: bouncing 0.6s infinite alternate;
        }

        .bouncing-loader div:nth-child(2) {
            animation-delay: 0.2s;
        }

        .bouncing-loader div:nth-child(3) {
            animation-delay: 0.4s;
        }

        /* Modo oscuro */
        .dark-mode {
            background-color: #343a40;
            color: #ffffff;
        }

        .dark-mode .main-header,
        .dark-mode .main-sidebar {
            background-color: #23272b;
        }

        .dark-mode .content-wrapper {
            background-color: #343a40;
        }

        .dark-mode .main-footer {
            background-color: #23272b;
        }

        .transition {
            transition: background-color 0.5s ease, color 0.5s ease;
        }

        .btn-dark-mode {
            color: #ffffff;
            background-color: #343a40;
            border: none;
        }

        .btn-dark-mode:hover {
            background-color: #23272b;
        }

        .btn-dark-mode.sun {
            color: #ffffff;
            /* Color blanco para el sol */
        }

        .btn-dark-mode.moon {
            color: #ffffff;
            /* Color blanco para la luna */
        }
    </style>
    <!-- <style>
        @keyframes bouncing {
            from {
                transform: translateY(0);
            }

            to {
                transform: translateY(-20px);
            }
        }
    </style> -->
</head>

<body class="hold-transition sidebar-mini">
    <div class="wrapper">
        <!-- Navbar -->
        <nav class="main-header navbar navbar-expand navbar-white navbar-light transition">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" data-widget="pushmenu" href="#" role="button">
                        <i class="fas fa-bars"></i>
                    </a>
                </li>
                <li class="nav-item">
                    <button class="btn btn-dark-mode moon" id="toggle-dark-mode">
                        <i class="fas fa-moon"></i>
                    </button>
                </li>
            </ul>
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a href="{% url 'logout' %}" class="btn btn-danger">
                        <i class="fa fa-power-off"></i> Cerrar Sesión
                    </a>
                </li>
            </ul>
        </nav>

        <!-- Main Sidebar Container -->
        <aside class="main-sidebar sidebar-dark-primary elevation-4">
            <a href="../../index3.html" class="brand-link">
                <img src="{% static 'adminlte/dist/img/AdminLTELogo.png' %}" alt="AdminLTE Logo"
                    class="brand-image img-circle elevation-3" style="opacity: .8">
                <span class="brand-text font-weight-light">AdminLTE 3</span>
            </a>
            <div class="sidebar">
                <div class="user-panel mt-3 pb-3 mb-3 d-flex">
                    <div class="image">
                        <img src="{% static 'adminlte/dist/img/user2-160x160.jpg' %}" class="img-circle elevation-2"
                            alt="User Image">
                    </div>
                    <div class="info">
                        <a href="#" class="d-block">Alexander Pierce</a>
                    </div>
                </div>
                <nav class="mt-2">
                    <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu"
                        data-accordion="false">
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="fa fa-puzzle-piece"></i>
                                <p>
                                    MANTENEDOR
                                    <i class="right fas fa-angle-left"></i>
                                </p>
                            </a>
                            <ul class="nav nav-treeview">
                                <li class="nav-item">
                                    <a href="{% url 'listarcategoria' %}" class="nav-link">
                                        <i class="far fa-circle nav-icon"></i>
                                        <p>Categoria</p>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="{% url 'listarunidad' %}" class="nav-link">
                                        <i class="far fa-circle nav-icon"></i>
                                        <p>Unidades</p>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="{% url 'listarproducto' %}" class="nav-link">
                                        <i class="far fa-circle nav-icon"></i>
                                        <p>Productos</p>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="{% url 'listarcliente' %}" class="nav-link">
                                        <i class="fa fa-users"></i>
                                        <p>Clientes</p>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="fa fa-puzzle-piece"></i>
                                <p>
                                    PROCESO
                                    <i class="right fas fa-angle-left"></i>
                                </p>
                            </a>
                            <ul class="nav nav-treeview">
                                <li class="nav-item">
                                    <a href="{% url 'listarventa' %}" class="nav-link">
                                        <i class="fa fa-users"></i>
                                        <p>Ventas</p>
                                    </a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </nav>
            </div>
        </aside>

        <!-- Content Wrapper. Contains page content -->
        <div class="content-wrapper">
            <section class="content">
                {% block content %}
                {% endblock %}
            </section>
        </div>

        <footer class="main-footer">
            <div class="float-right d-none d-sm-block">
                <b>Version</b> 3.1.0-rc
            </div>
            <strong>Copyright &copy; 2014-2020 <a href="https://adminlte.io">AdminLTE.io</a>.</strong> All rights
            reserved.
        </footer>

        <aside class="control-sidebar control-sidebar-dark">
        </aside>
    </div>

    <script src="{% static 'adminlte/plugins/jquery/jquery.min.js' %}"></script>
    <script src="{% static 'adminlte/plugins/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
    <script src="{% static 'adminlte/dist/js/adminlte.min.js' %}"></script>
    <!-- <script src="{% static 'adminlte/dist/js/demo.js' %}"></script> -->
    {% block js %}
    {% endblock %}
    {% block script %}
    {% endblock %}
    <script>
        $(document).ready(function () {
            $('.nav-link').on('click', function (e) {
                var targetUrl = $(this).attr('href');
                var allowedPages = [
                    '{% url "listarcategoria" %}',
                    '{% url "listarunidad" %}',
                    '{% url "listarproducto" %}',
                    '{% url "listarcliente" %}',
                    '{% url "listarventa" %}'
                ];

                if (allowedPages.includes(targetUrl)) {
                    e.preventDefault();

                    // Mostrar la animación de carga
                    $('body').append('<div class="loading"><div class="bouncing-loader"><div></div><div></div><div></div></div></div>');

                    // Esperar 3 segundos antes de redirigir
                    setTimeout(function () {
                        // Ocultar la animación de carga antes de redirigir
                        $('.loading').remove();
                        window.location.href = targetUrl;
                    }, 600);
                }
            });

            // $('#dark-mode-toggle').on('click', function() {
            //     $('body').toggleClass('dark-mode');
            //     $(this).toggleClass('moon sun');

            //     // Cambiar icono del botón
            //     if ($('body').hasClass('dark-mode')) {
            //         $(this).find('i').removeClass('fa-moon').addClass('fa-sun');
            //     } else {
            //         $(this).find('i').removeClass('fa-sun').addClass('fa-moon');
            //     }
            // });

            // // Detectar si hay un tema guardado en localStorage y aplicarlo
            // if (localStorage.getItem('dark-mode') === 'true') {
            //     $('body').addClass('dark-mode');
            //     $('#dark-mode-toggle').removeClass('moon').addClass('sun');
            //     $('#dark-mode-toggle').find('i').removeClass('fa-moon').addClass('fa-sun');
            // }

            // // Guardar la preferencia del usuario en localStorage
            // $('body').on('classChange', function() {
            //     localStorage.setItem('dark-mode', $('body').hasClass('dark-mode'));
            // });
        });
        // Función para aplicar el modo oscuro
        function applyDarkMode(isDarkMode) {
            if (isDarkMode) {
                document.body.classList.add('dark-mode');
            } else {
                document.body.classList.remove('dark-mode');
            }
        }

        // Verifica la preferencia almacenada al cargar la página
        document.addEventListener('DOMContentLoaded', () => {
            const darkMode = localStorage.getItem('darkMode') === 'true';
            applyDarkMode(darkMode);
           
        });

        // Maneja el clic en el botón para alternar el modo oscuro
        document.getElementById('toggle-dark-mode').addEventListener('click', () => {
            const isDarkMode = document.body.classList.contains('dark-mode');
            const newDarkMode = !isDarkMode;
            applyDarkMode(newDarkMode);
            localStorage.setItem('darkMode', newDarkMode);
          
        });
    </script>
</body>

</html>